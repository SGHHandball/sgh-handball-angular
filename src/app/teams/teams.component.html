<mat-spinner [diameter]="30" *ngIf="!teamsService.teamsLoaded" class="loading-spinner"></mat-spinner>

<ng-container *ngIf="teamsService.teamsLoaded">
  <mat-tab-group *ngIf="teamsService.teamsLoaded" (selectedTabChange)="onOtherTabSelected($event)">
    <mat-tab *ngFor="let team of teamsService.teams" label="{{team ? team.teamAge : '---'}}">
      <app-teams-detail [team]="team"></app-teams-detail>
    </mat-tab>
  </mat-tab-group>


  <h2 class="news-header" *ngIf="!currentTeam">{{translationService.get(noTeamsTC)}}</h2>

  <ng-container *ngIf="currentTeam">
    <h2 class="news-header">{{translationService.get(newsHeaderTC)}}</h2>

    <div class="container">
      <app-news-card-list
        [news]="filteredNews"
        (editClickListener)="newsService.openNewsEdit($event)"
        (deleteClickListener)="openDeleteNewsDialog($event)"
        (sendClickListener)="openSendNewsDialog($event)"
        (checkClickListener)="openCheckNewsDialog($event)"
      ></app-news-card-list>
    </div>
  </ng-container>

  <app-add-btn
    *ngIf="adminService.isUserTeamsAdmin() ||
             (currentTeam && adminService.hasUserRightsForTeam(currentTeam.teamAge,currentTeam.teamSeason))"
    [matMenu]="menu"
    [moreIcon]="true"
  ></app-add-btn>

  <mat-menu #menu="matMenu">
    <button mat-menu-item (click)="editTeamPage()"
            *ngIf="adminService.isUserTeamsAdmin() ||
             (currentTeam && adminService.hasUserRightsForTeam(currentTeam.teamAge,currentTeam.teamSeason))">{{translationService.get(editTeamPageTC)}}</button>
    <ng-container *ngIf="adminService.isUserTeamsAdmin()">
      <button mat-menu-item (click)="deleteTab()">{{translationService.get(deleteTeamTC)}}</button>
      <button mat-menu-item (click)="changeOrderOfTabs()">{{translationService.get(orderChangeTC)}}</button>
      <button mat-menu-item (click)="addNewTeamToTab()">{{translationService.get(addTeamTC)}}</button>
    </ng-container>
  </mat-menu>
</ng-container>
