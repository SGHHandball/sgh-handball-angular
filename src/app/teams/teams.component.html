<mat-spinner [diameter]="30" *ngIf="!currentTeam" class="loading-spinner"></mat-spinner>

<ng-container *ngIf="currentTeam">
  <app-teams-detail
    [team]="currentTeam"
    [editTeamsActive]="editTeamsActive"
  ></app-teams-detail>


  <h2 class="news-header" *ngIf="!currentTeam">{{translationService.get(noTeamsTC)}}</h2>

  <ng-container *ngIf="currentTeam">
    <h2 class="news-header">{{translationService.get(newsHeaderTC)}}</h2>

    <div class="container">
      <app-news-card-list
        [news]="filteredNews"
        (editClickListener)="newsService.openNewsEdit($event.id)"
        (deleteClickListener)="openDeleteNewsDialog($event)"
        (sendClickListener)="openSendNewsDialog($event)"
        (checkClickListener)="openCheckNewsDialog($event)"
      ></app-news-card-list>
    </div>
  </ng-container>

  <app-add-btn
    *ngIf="adminService.isUserTeamsAdmin() ||
             (currentTeam && dataService.hasUserRightsForTeam(currentTeam.teamAge,currentTeam.teamSeason)|async)"
    [matMenu]="menu"
    [moreIcon]="true"
  ></app-add-btn>

  <mat-menu #menu="matMenu">
    <ng-container *ngIf="adminService.isUserTeamsAdmin() ||
             (currentTeam && dataService.hasUserRightsForTeam(currentTeam.teamAge,currentTeam.teamSeason)|async)">
      <button mat-menu-item
              (click)="dataService.addNewNews(newsTypeReport, currentTeam)"> {{translationService.get(newsTypeReportTC)}}</button>
      <button mat-menu-item (click)="editTeamPage()">{{translationService.get(editTeamPageTC)}}</button>
    </ng-container>
    <ng-container *ngIf="adminService.isUserTeamsAdmin()">
      <button mat-menu-item (click)="deleteTeam()">{{translationService.get(deleteTeamTC)}}</button>
      <button mat-menu-item (click)="changeOrderOfTeams()">{{translationService.get(orderChangeTC)}}</button>
      <button mat-menu-item (click)="addNewTeam()">{{translationService.get(addTeamTC)}}</button>
    </ng-container>
  </mat-menu>
</ng-container>
